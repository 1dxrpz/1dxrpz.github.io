var searchTab=document.querySelector("#searchTab"),search_bar=document.querySelector(".search_bar"),searchHistory_container=document.querySelector(".searchHistory_container"),shortcut_links_wrapper=document.querySelector(".shortcut_links_wrapper"),clocks=document.querySelector("#clocks"),searchHistory={items:[]},ShortcutLinks=[];const isValidUrl=e=>{var t;return!!RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};function readFile(){if(!this.files||!this.files[0])return;let e=new FileReader,t=this.files[0];e.addEventListener("load",()=>{var r=document.createElement("img");r.onload=function(e){var a=document.createElement("canvas"),c=a.getContext("2d");a.width=r.width/2,a.height=r.height/2,c.drawImage(r,0,0,a.width,a.height),c.mozImageSmoothingEnabled=!1,c.webkitImageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1;var n=a.toDataURL(t.type);document.querySelector("body").style.backgroundImage=`url(${n})`,localStorage.setItem("background",n)},r.src=e.result}),e.readAsDataURL(this.files[0])}document.querySelector("#inp").addEventListener("change",readFile),window.onload=()=>{clocks.innerHTML=formatAMPM(new Date),searchTab.focus(),null==localStorage.getItem("ShortcutLinks")?localStorage.setItem("ShortcutLinks",JSON.stringify(ShortcutLinks)):ShortcutLinks=JSON.parse(localStorage.getItem("ShortcutLinks")),null==localStorage.getItem("background")?localStorage.setItem("background","undefined"):"undefined"!=localStorage.getItem("background")&&(document.querySelector("body").style.backgroundImage=`url(${localStorage.getItem("background")})`),null==localStorage.getItem("searchHistory")?localStorage.setItem("searchHistory",JSON.stringify(searchHistory)):searchHistory=JSON.parse(localStorage.getItem("searchHistory")),UpdateLinks()};var webpage=!1,ajaxDelay=!1,CurrentSearchInput="",currentAcSelected=-1;function Autocomplete(e){CurrentSearchInput=e.value,currentAcSelected=-1;let t=0!=e.value.trim().length;searchHistory_container.innerHTML="",searchHistory_container.setAttribute("data-visible",t),webpage=isValidUrl(e.value),search_bar.setAttribute("data-webpage",webpage),searchTab.style.paddingRight=webpage?"100px":"0",ajaxDelay=!0,t&&ajaxDelay&&$.ajax({url:`https://dxrpz-common-utils.herokuapp.com/https://suggestqueries.google.com/complete/search?client=firefox&q=${e.value}`,method:"get",success:function(t){JSON.parse(t)[1].forEach(t=>{var r=t.split(e.value)[1];searchHistory_container.innerHTML+=`<div class="search_autocomplete" data-value="${t}" onclick="SelectAutocomplete(this)"
					>${void 0!=r?e.value:""}<span>${void 0!=r?r:t}</span></div>`})},error:function(e,t){console.log(t)}})}function search(e){"Enter"===event.key&&(webpage?window.location.href=e.value.includes("https://")?e.value:"https://"+e.value:window.location.href=`https://www.google.com/search?q=${e.value.split(" ").join("+")}`,searchHistory.items.push(e.value),localStorage.setItem("searchHistory",JSON.stringify(searchHistory)))}function ClearSearchHistory(){searchHistory={items:[]},localStorage.setItem("searchHistory",JSON.stringify(searchHistory))}function ClearBackgroundImage(){localStorage.setItem("background",void 0),window.location.reload()}function SelectAutocomplete(e){searchTab.value=e.getAttribute("data-value"),searchTab.focus()}function AddNewLink(){var e=new URL(prompt("URL"));ShortcutLinks.some(t=>t.link==e.href)||(ShortcutLinks.push({link:e.href,icon:`https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e.origin}&size=64`}),localStorage.setItem("ShortcutLinks",JSON.stringify(ShortcutLinks)),UpdateLinks())}function RemoveLink(e){event.preventDefault();var t=ShortcutLinks.indexOf(t=>t.link==e.getAttribute("href"));ShortcutLinks.splice(t,1),localStorage.setItem("ShortcutLinks",JSON.stringify(ShortcutLinks)),UpdateLinks()}function ClearShortcutLinks(){ShortcutLinks=[],localStorage.setItem("ShortcutLinks",JSON.stringify(ShortcutLinks)),UpdateLinks()}function UpdateLinks(){shortcut_links_wrapper.innerHTML="",ShortcutLinks.forEach(e=>{shortcut_links_wrapper.innerHTML+=`<a class="link" href="${e.link}" oncontextmenu="RemoveLink(this)"><img alt="icon" src="${e.icon}" /></a>`})}function formatAMPM(e){var t=e.getHours(),r=e.getMinutes(),a=t>=12?"pm":"am";return t%=12,(t=t||12)+":"+(r=r<10?"0"+r:r)+" "+`<span>${a}</span>`}searchTab.addEventListener("keydown",e=>{var t=document.querySelectorAll(".search_autocomplete");38==e.keyCode&&currentAcSelected>-1&&(currentAcSelected=currentAcSelected>-1?currentAcSelected-1:t.length-1),40==e.keyCode&&(currentAcSelected=currentAcSelected<t.length-1?currentAcSelected+1:-1),(40==e.keyCode||38==e.keyCode)&&(e.preventDefault(),t.forEach(e=>{e.setAttribute("data-selected",!1)}),-1!=currentAcSelected?(t[currentAcSelected].setAttribute("data-selected",!0),SelectAutocomplete(t[currentAcSelected])):searchTab.value=CurrentSearchInput)}),setInterval(e=>{clocks.innerHTML=formatAMPM(new Date)},1e3);