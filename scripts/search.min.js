var searchTab=document.querySelector("#searchTab"),search_bar=document.querySelector(".search_bar"),searchHistory_container=document.querySelector(".searchHistory_container"),clocks=document.querySelector("#clocks"),searchHistory={items:[]};const isValidUrl=e=>{var t;return!!RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};function readFile(){if(!this.files||!this.files[0])return;let e=new FileReader,t=this.files[0];e.addEventListener("load",()=>{var r=document.createElement("img");r.onload=function(e){var a=document.createElement("canvas"),s=a.getContext("2d");a.width=r.width/2,a.height=r.height/2,s.drawImage(r,0,0,a.width,a.height),s.mozImageSmoothingEnabled=!1,s.webkitImageSmoothingEnabled=!1,s.msImageSmoothingEnabled=!1,s.imageSmoothingEnabled=!1;var o=a.toDataURL(t.type);document.querySelector("body").style.backgroundImage=`url(${o})`,localStorage.setItem("background",o)},r.src=e.result}),e.readAsDataURL(this.files[0])}document.querySelector("#inp").addEventListener("change",readFile),window.onload=()=>{clocks.innerHTML=formatAMPM(new Date),searchTab.focus(),null==localStorage.getItem("background")?localStorage.setItem("background",""):("undefined"==localStorage.getItem("background")&&(document.querySelector("body").style.backgroundImage="url(https://images.unsplash.com/photo-1611605645802-c21be743c321?w=2070&q=80)"),document.querySelector("body").style.backgroundImage=`url(${localStorage.getItem("background")})`),null==localStorage.getItem("searchHistory")?localStorage.setItem("searchHistory",JSON.stringify(searchHistory)):searchHistory=JSON.parse(localStorage.getItem("searchHistory"))};var webpage=!1;function Autocomplete(e){let t=0!=e.value.trim().length;searchHistory_container.innerHTML="",searchHistory_container.setAttribute("data-visible",t),webpage=isValidUrl(e.value),search_bar.setAttribute("data-webpage",webpage),searchTab.style.paddingRight=webpage?"100px":"0",t&&$.ajax({url:`	https://suggestqueries.google.com/complete/search?client=firefox&q=${e.value}`,method:"get",success:function(e){JSON.parse(e)[1].forEach(e=>{searchHistory_container.innerHTML+=`<div class="search_autocomplete">${e}</div>`})},error:function(e,t){console.log(t)}})}function search(e){"Enter"===event.key&&(webpage?window.location.href=e.value.includes("https://")?e.value:"https://"+e.value:window.location.href=`https://www.google.com/search?q=${e.value.split(" ").join("+")}`,searchHistory.items.push(e.value),localStorage.setItem("searchHistory",JSON.stringify(searchHistory)))}function ClearSearchHistory(){searchHistory={items:[]},localStorage.setItem("searchHistory",JSON.stringify(searchHistory))}function formatAMPM(e){var t=e.getHours(),r=e.getMinutes(),a=t>=12?"pm":"am";return t%=12,(t=t||12)+":"+(r=r<10?"0"+r:r)+" "+`<span>${a}</span>`}setInterval(e=>{clocks.innerHTML=formatAMPM(new Date)},1e3);